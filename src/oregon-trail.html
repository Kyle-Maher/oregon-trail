<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oregon Trail</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=IM+Fell+English:ital@0;1&display=swap">
</head>
<body>
    <!-- Title Screen -->
    <div class="title-screen" id="titleScreen">
        <div class="title-content">
            <h1 class="title-main">ğŸ‚ THE OREGON TRAIL ğŸ‚</h1>
            <div class="title-subtitle">A Journey of 2000 Miles</div>
            
            <div class="title-description">
                <p>The year is 1848. You are a pioneer heading west from Independence, Missouri to Oregon City in search of a better life.</p>
                <p>Manage your supplies, overcome obstacles, and survive the dangerous journey ahead.</p>
            </div>

            <div class="title-info-cards">
                <div class="info-card">
                    <div class="info-icon">ğŸ¯</div>
                    <div class="info-title">Your Goal</div>
                    <div class="info-text">Travel 2000 miles to Oregon City</div>
                </div>
                <div class="info-card">
                    <div class="info-icon">âš ï¸</div>
                    <div class="info-title">Challenges</div>
                    <div class="info-text">Rivers, forts, landmarks & survival</div>
                </div>
                <div class="info-card">
                    <div class="info-icon">ğŸ®</div>
                    <div class="info-title">Mini-Games</div>
                    <div class="info-text">Hunt for food & ford rivers</div>
                </div>
            </div>

            <div class="title-starting-supplies">
                <div class="supplies-title">Starting Budget:</div>
                <div class="supplies-list">
                    <span>ğŸ’° $150 to spend at the Outfitter</span>
                </div>
            </div>

            <button class="start-button" onclick="goToOutfitter()">BEGIN YOUR JOURNEY</button>
            
            <div class="title-footer">
                Press Enter or click the button to start
            </div>
        </div>
    </div>

    <!-- Outfitter Screen -->
    <div class="outfitter-screen" id="outfitterScreen" style="display: none;">
        <div class="outfitter-content">
            <div class="outfitter-header">
                <h1 class="outfitter-title">ğŸª MATT'S GENERAL STORE ğŸª</h1>
                <div class="outfitter-subtitle">Independence, Missouri</div>
                <div class="outfitter-welcome">
                    <p>"Welcome, traveler! You'll need supplies for the long road ahead. Choose wisely â€” once you leave, there's no turning back!"</p>
                </div>
            </div>

            <div class="outfitter-budget">
                <span class="budget-label">Remaining Budget:</span>
                <span class="budget-amount" id="outfitterBudget">$150</span>
            </div>

            <div class="outfitter-items">
                <div class="shop-item" id="shopItem-oxen">
                    <div class="shop-item-icon">ğŸ‚</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Oxen</div>
                        <div class="shop-item-desc">Essential for pulling your wagon. More oxen = faster travel. You need at least 1.</div>
                        <div class="shop-item-price">$25 each</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('oxen', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-oxen">0</span>
                        <button class="qty-btn" onclick="adjustItem('oxen', 1)">+</button>
                    </div>
                </div>

                <div class="shop-item" id="shopItem-food">
                    <div class="shop-item-icon">ğŸŒ¾</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Food</div>
                        <div class="shop-item-desc">Measured in pounds. Your party eats 5-8 lbs per day. Stock up!</div>
                        <div class="shop-item-price">$5 per 25 lbs</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('food', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-food">0</span>
                        <button class="qty-btn" onclick="adjustItem('food', 1)">+</button>
                    </div>
                </div>

                <div class="shop-item" id="shopItem-parts">
                    <div class="shop-item-icon">ğŸ”§</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Spare Parts</div>
                        <div class="shop-item-desc">Wagon wheels, axles, and tongues. Repairs cost money if you don't have spares.</div>
                        <div class="shop-item-price">$10 per set</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('parts', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-parts">0</span>
                        <button class="qty-btn" onclick="adjustItem('parts', 1)">+</button>
                    </div>
                </div>

                <div class="shop-item" id="shopItem-medicine">
                    <div class="shop-item-icon">ğŸ’Š</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Medicine</div>
                        <div class="shop-item-desc">Each dose restores health on the trail. Can also treat sick oxen.</div>
                        <div class="shop-item-price">$15 per dose</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('medicine', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-medicine">0</span>
                        <button class="qty-btn" onclick="adjustItem('medicine', 1)">+</button>
                    </div>
                </div>

                <div class="shop-item" id="shopItem-clothing">
                    <div class="shop-item-icon">ğŸ§¥</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Clothing</div>
                        <div class="shop-item-desc">Extra sets protect against cold weather and storms.</div>
                        <div class="shop-item-price">$10 per set</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('clothing', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-clothing">0</span>
                        <button class="qty-btn" onclick="adjustItem('clothing', 1)">+</button>
                    </div>
                </div>
            </div>

            <div class="cart-summary" id="cartSummary">
                <div class="cart-title">Your Wagon:</div>
                <div class="cart-items" id="cartItems">
                    <span class="cart-empty">Your wagon is empty. Buy some supplies!</span>
                </div>
            </div>

            <div class="outfitter-warning" id="outfitterWarning" style="display: none;"></div>

            <div class="outfitter-buttons">
                <button class="outfitter-btn-depart" onclick="departOutfitter()" id="departBtn">
                    DEPART FOR OREGON â†’
                </button>
            </div>

            <div class="outfitter-tip">
                <strong>Tip:</strong> You need at least 1 ox and some food to survive. Leftover money can be used at forts along the trail.
            </div>
        </div>
    </div>

    <!-- Main Game -->
    <div class="game-container" id="gameContainer" style="display: none;">
        <div class="game-header">
            <h1>ğŸ‚ THE OREGON TRAIL ğŸ‚</h1>
            <div class="day-display" id="dayDisplay">Day 1</div>
        </div>

        <div class="flip-container">
            <div class="flip-inner" id="flipInner">
                <!-- Main Game Content (Front) -->
                <div class="main-game-content">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                        <div class="progress-label" id="progressLabel">0 miles</div>
                        <div id="landmarkMarkers"></div>
                    </div>

                    <div class="landmark-indicator" id="landmarkIndicator">
                        Starting Point: Independence, Missouri
                    </div>

                    <div class="game-body">
                        <!-- Travel Log -->
                        <div class="travel-log-container">
                            <div class="travel-log-header">Trail Journal</div>
                            <div class="travel-log" id="travelLog"></div>
                        </div>
                    </div>

                    <!-- Hidden stats elements (values updated by JS, shown in supplies menu) -->
                    <div style="display:none">
                        <span id="distance"></span>
                        <span id="food"></span>
                        <span id="health"></span>
                        <span id="money"></span>
                        <span id="oxen"></span>
                        <span id="spareParts"></span>
                        <span id="medicineDoses"></span>
                        <span id="clothingSets"></span>
                    </div>

                    <!-- Message Box (for encounter prompts) -->
                    <div class="message-box" id="messageBox" style="display: none;"></div>

                    <!-- Action Buttons -->
                    <div class="buttons" id="actionButtons">
                        <button onclick="beginTraveling()" class="action-btn action-btn-travel">ğŸ‚ Begin Traveling</button>
                    </div>
                </div>

                <!-- Hunting Mini-Game (Back) -->
                <div class="hunting-game" id="huntingGame" style="display: none;">
                    <div id="hunting-game-wrapper">
                        <canvas id="huntingCanvas" width="660" height="420"></canvas>

                        <div id="hunting-hud">
                            <div class="hunting-hud-group">
                                <div class="hunting-hud-label">Bullets</div>
                                <div class="hunting-hud-value" id="hunting-hud-ammo">20</div>
                            </div>
                            <div class="hunting-hud-group hunting-hud-center">
                                <div class="hunting-hud-label">Time Remaining</div>
                                <div class="hunting-hud-value" id="hunting-hud-time">0:60</div>
                            </div>
                            <div class="hunting-hud-group hunting-hud-right">
                                <div class="hunting-hud-label">Meat (lbs)</div>
                                <div class="hunting-hud-value" id="hunting-hud-meat">0</div>
                            </div>
                        </div>

                        <div id="hunting-message-overlay">
                            <h1>Hunting Grounds</h1>
                            <h2>The prairie stretches before you...</h2>
                            <div class="hunting-instructions-overlay">
                                Aim with your mouse and click to fire.<br>
                                Lead your shots â€” bullets take time to travel.<br>
                                Animals will flee at the sound of gunfire.<br>
                                You have limited ammo and daylight.
                            </div>
                            <div class="hunting-animal-legend">
                                <div class="hunting-legend-item">ğŸ¦Œ Deer<span>65 lbs</span></div>
                                <div class="hunting-legend-item">ğŸ¦¬ Bison<span>200 lbs</span></div>
                                <div class="hunting-legend-item">ğŸ‡ Rabbit<span>8 lbs</span></div>
                                <div class="hunting-legend-item">ğŸ¦… Eagle<span>12 lbs</span></div>
                            </div>
                            <button class="hunting-btn" id="huntingStartBtn">Begin Hunt</button>
                        </div>
                    </div>
                </div>

                <!-- River Crossing Mini-Game (Back) -->
                <div class="river-game" id="riverGame" style="display: none;">
                    <div class="river-info" id="riverInfo"></div>
                    <div id="river-game-wrapper">
                        <canvas id="riverCanvas" width="660" height="420"></canvas>
                        <div id="riverOverlay">
                            <!-- populated by riverShowOverlay() -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts: events first (data), then core game, then mini-games -->
    <script src="events.js"></script>
    <script src="game.js"></script>
    <script src="hunting.js"></script>
    <script src="river.js"></script>
</body>
</html>
