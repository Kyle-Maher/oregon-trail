<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oregon Trail</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Title Screen -->
    <div class="title-screen" id="titleScreen">
        <div class="title-content">
            <h1 class="title-main">ğŸ‚ THE OREGON TRAIL ğŸ‚</h1>
            <div class="title-subtitle">A Journey of 2000 Miles</div>
            
            <div class="title-description">
                <p>The year is 1848. You are a pioneer heading west from Independence, Missouri to Oregon City in search of a better life.</p>
                <p>Manage your supplies, overcome obstacles, and survive the dangerous journey ahead.</p>
            </div>

            <div class="title-info-cards">
                <div class="info-card">
                    <div class="info-icon">ğŸ¯</div>
                    <div class="info-title">Your Goal</div>
                    <div class="info-text">Travel 2000 miles to Oregon City</div>
                </div>
                <div class="info-card">
                    <div class="info-icon">âš ï¸</div>
                    <div class="info-title">Challenges</div>
                    <div class="info-text">Rivers, forts, landmarks & survival</div>
                </div>
                <div class="info-card">
                    <div class="info-icon">ğŸ®</div>
                    <div class="info-title">Mini-Games</div>
                    <div class="info-text">Hunt for food & ford rivers</div>
                </div>
            </div>

            <div class="title-starting-supplies">
                <div class="supplies-title">Starting Budget:</div>
                <div class="supplies-list">
                    <span>ğŸ’° $150 to spend at the Outfitter</span>
                </div>
            </div>

            <button class="start-button" onclick="goToOutfitter()">BEGIN YOUR JOURNEY</button>
            
            <div class="title-footer">
                Press Enter or click the button to start
            </div>
        </div>
    </div>

    <!-- Outfitter Screen -->
    <div class="outfitter-screen" id="outfitterScreen" style="display: none;">
        <div class="outfitter-content">
            <div class="outfitter-header">
                <h1 class="outfitter-title">ğŸª MATT'S GENERAL STORE ğŸª</h1>
                <div class="outfitter-subtitle">Independence, Missouri</div>
                <div class="outfitter-welcome">
                    <p>"Welcome, traveler! You'll need supplies for the long road ahead. Choose wisely â€” once you leave, there's no turning back!"</p>
                </div>
            </div>

            <div class="outfitter-budget">
                <span class="budget-label">Remaining Budget:</span>
                <span class="budget-amount" id="outfitterBudget">$150</span>
            </div>

            <div class="outfitter-items">
                <!-- Oxen -->
                <div class="shop-item" id="shopItem-oxen">
                    <div class="shop-item-icon">ğŸ‚</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Oxen</div>
                        <div class="shop-item-desc">Essential for pulling your wagon. More oxen = faster travel. You need at least 1.</div>
                        <div class="shop-item-price">$25 each</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('oxen', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-oxen">0</span>
                        <button class="qty-btn" onclick="adjustItem('oxen', 1)">+</button>
                    </div>
                </div>

                <!-- Food -->
                <div class="shop-item" id="shopItem-food">
                    <div class="shop-item-icon">ğŸŒ¾</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Food</div>
                        <div class="shop-item-desc">Measured in pounds. Your party eats 5-8 lbs per day. Stock up!</div>
                        <div class="shop-item-price">$5 per 25 lbs</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('food', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-food">0</span>
                        <button class="qty-btn" onclick="adjustItem('food', 1)">+</button>
                    </div>
                </div>

                <!-- Spare Parts -->
                <div class="shop-item" id="shopItem-parts">
                    <div class="shop-item-icon">ğŸ”§</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Spare Parts</div>
                        <div class="shop-item-desc">Wagon wheels, axles, and tongues. Repairs cost money if you don't have spares.</div>
                        <div class="shop-item-price">$10 per set</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('parts', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-parts">0</span>
                        <button class="qty-btn" onclick="adjustItem('parts', 1)">+</button>
                    </div>
                </div>

                <!-- Medicine -->
                <div class="shop-item" id="shopItem-medicine">
                    <div class="shop-item-icon">ğŸ’Š</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Medicine</div>
                        <div class="shop-item-desc">Each dose restores health on the trail. Can also treat sick oxen.</div>
                        <div class="shop-item-price">$15 per dose</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('medicine', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-medicine">0</span>
                        <button class="qty-btn" onclick="adjustItem('medicine', 1)">+</button>
                    </div>
                </div>

                <!-- Clothing -->
                <div class="shop-item" id="shopItem-clothing">
                    <div class="shop-item-icon">ğŸ§¥</div>
                    <div class="shop-item-details">
                        <div class="shop-item-name">Clothing</div>
                        <div class="shop-item-desc">Extra sets protect against cold weather and storms.</div>
                        <div class="shop-item-price">$10 per set</div>
                    </div>
                    <div class="shop-item-controls">
                        <button class="qty-btn" onclick="adjustItem('clothing', -1)">âˆ’</button>
                        <span class="qty-display" id="qty-clothing">0</span>
                        <button class="qty-btn" onclick="adjustItem('clothing', 1)">+</button>
                    </div>
                </div>
            </div>

            <!-- Cart Summary -->
            <div class="cart-summary" id="cartSummary">
                <div class="cart-title">Your Wagon:</div>
                <div class="cart-items" id="cartItems">
                    <span class="cart-empty">Your wagon is empty. Buy some supplies!</span>
                </div>
            </div>

            <div class="outfitter-warning" id="outfitterWarning" style="display: none;"></div>

            <div class="outfitter-buttons">
                <button class="outfitter-btn-depart" onclick="departOutfitter()" id="departBtn">
                    DEPART FOR OREGON â†’
                </button>
            </div>

            <div class="outfitter-tip">
                <strong>Tip:</strong> You need at least 1 ox and some food to survive. Leftover money can be used at forts along the trail.
            </div>
        </div>
    </div>

    <div class="game-container" id="gameContainer" style="display: none;">
        <h1>ğŸ‚ THE OREGON TRAIL ğŸ‚</h1>

        <div class="flip-container">
            <div class="flip-inner" id="flipInner">
                <!-- Main Game Content (Front) -->
                <div class="main-game-content">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                        <div class="progress-label" id="progressLabel">0 miles</div>
                        <div id="landmarkMarkers"></div>
                    </div>

                    <div class="landmark-indicator" id="landmarkIndicator">
                        Starting Point: Independence, Missouri
                    </div>

                    <div class="stats">
                        <div class="stat-row"><span class="stat-label">Distance:</span><span id="distance">0 / 2000 miles</span></div>
                        <div class="stat-row"><span class="stat-label">Food:</span><span id="food">0 lbs</span></div>
                        <div class="stat-row"><span class="stat-label">Health:</span><span id="health">100%</span></div>
                        <div class="stat-row"><span class="stat-label">Money:</span><span id="money">$0</span></div>
                        <div class="stat-row"><span class="stat-label">Oxen:</span><span id="oxen">0</span></div>
                        <div class="stat-row"><span class="stat-label">Spare Parts:</span><span id="spareParts">0</span></div>
                        <div class="stat-row"><span class="stat-label">Medicine:</span><span id="medicineDoses">0 doses</span></div>
                        <div class="stat-row"><span class="stat-label">Clothing:</span><span id="clothingSets">0 sets</span></div>
                    </div>

                    <div class="message-box" id="messageBox">
                        Welcome to the Oregon Trail! You are starting your journey from Independence, Missouri to Oregon City. It's a long 2000 mile journey. Manage your resources wisely and make it safely to Oregon!
                    </div>

                    <div class="buttons" id="actionButtons">
                        <button onclick="travel()">Continue on Trail</button>
                        <button onclick="rest()">Rest (Recover Health)</button>
                        <button onclick="hunt()">Hunt for Food</button>
                        <button onclick="useMedicine()" id="medicineButton" disabled>Use Medicine</button>
                    </div>
                </div>

                <!-- Hunting Mini-Game (Back) -->
                <div class="hunting-game" id="huntingGame" style="display: none;">
                    <div class="hunting-title">ğŸ‚ HUNTING ğŸ‚</div>
                    <div class="hunting-instructions" id="huntingInstructions">
                        Watch the pattern carefully!
                    </div>
                    <div class="hunting-status" id="huntingStatus"></div>
                    <div class="hunting-score" id="huntingScore">Pattern Length: 5</div>
                    <div class="grid-container" id="gridContainer"></div>
                </div>

                <!-- River Crossing Mini-Game (Back) -->
                <div class="river-game" id="riverGame" style="display: none;">
                    <div class="river-title">ğŸŒŠ FORD THE RIVER ğŸŒŠ</div>
                    <div class="river-instructions" id="riverInstructions">
                        Click "CROSS!" when your wagon is in the GREEN ZONE!
                    </div>
                    <div class="river-info" id="riverInfo"></div>

                    <div class="river-scene" id="riverScene">
                        <div class="river-bank-left"></div>
                        <div class="river-bank-right"></div>
                        <div class="current-indicator" id="currentIndicator"></div>
                        <div class="safe-zone" id="crossingZone">âœ“</div>
                        <div class="wagon" id="wagon">
                            <div class="wagon-cover"></div>
                            <div class="wagon-body">
                                <div class="wagon-wheel wheel-left"></div>
                                <div class="wagon-wheel wheel-right"></div>
                            </div>
                        </div>
                    </div>

                    <div class="river-status" id="riverStatus">Get ready...</div>

                    <div class="buttons">
                        <button class="river-button" id="crossButton" onclick="attemptCrossing()" disabled>
                            CROSS!
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Core game logic (defines gameState and shared functions first) -->
    <script src="game.js"></script>
    <!-- Mini-game modules -->
    <script src="hunting.js"></script>
    <script src="river.js"></script>
</body>
</html>
